<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iris's book</title>
  <style>
    :root{
      --grad-main: linear-gradient(to top, #F8C8DC, #F0BEE8, #E6DAF5);
      --grad-menu: linear-gradient(to bottom, rgb(250,218,221), rgb(216,191,216));
      --text-dark: #4b3b4f;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:var(--grad-main);
      color:var(--text-dark);
      min-height:100vh;
    }
    .hidden{display:none}

    /* HEADER */
    header{
      position:sticky;top:0;z-index:1000;
      background:rgba(255,255,255,.25);
      backdrop-filter:blur(8px);
      padding:12px 16px;
      display:flex;justify-content:space-between;align-items:center;
    }
    header::after{
      content:"";position:absolute;bottom:0;left:10%;right:10%;height:1px;
      background:linear-gradient(to right,transparent,rgba(255,255,255,.8),transparent);
    }
    .logo{display:flex;align-items:center;gap:8px;font-weight:600;cursor:pointer}
    .logo-circle{
      width:28px;height:28px;border-radius:50%;
      background:var(--grad-main);display:flex;align-items:center;justify-content:center;color:#fff
    }

    /* MENU */
    .menu-btn{width:28px;height:22px;display:flex;flex-direction:column;justify-content:space-between;cursor:pointer}
    .menu-btn span{height:3px;background:#fff;border-radius:2px;transition:.3s}
    .menu-btn.active span:nth-child(1){transform:rotate(45deg) translate(5px,5px)}
    .menu-btn.active span:nth-child(2){opacity:0}
    .menu-btn.active span:nth-child(3){transform:rotate(-45deg) translate(6px,-6px)}
    .menu-panel{
      position:fixed;top:64px;right:16px;width:70%;max-width:260px;
      background:var(--grad-menu);border-radius:16px;padding:16px;display:none
    }
    .menu-panel.active{display:block}

    main{padding:16px}

    /* HOME */
    .story-card{background:rgba(255,255,255,.4);border-radius:16px;padding:12px;display:flex;gap:12px;margin-bottom:16px;cursor:pointer}
    .story-thumb{width:70px;height:90px;border-radius:12px;background:linear-gradient(to bottom right,#f7b7d2,#d6c1f0)}

    /* STORY */
    .story-header{display:flex;gap:16px;margin-bottom:16px}
    .story-img{width:100px;height:140px;border-radius:16px;background:#ddd}
    .tabs{display:flex;gap:16px;margin-bottom:8px}
    .tabs span{cursor:pointer}
    .tabs .active{text-decoration:underline}
    .box{
  background: rgba(255,255,255,.35);
  border-radius: 16px;
  padding: 18px;
  margin-top: 12px;

  /* QUAN TR·ªåNG */
  height: calc(100vh - 220px); /* chi·∫øm ph·∫ßn c√≤n l·∫°i */
  overflow-y: auto;

  /* ƒê·ªåC TRUY·ªÜN */
  white-space: pre-line;
  line-height: 1.9;
  font-size: 18px;
}


    /* CHAPTER */
    .chapter-nav{display:flex;justify-content:center;align-items:center;gap:8px;margin:12px 0}
    .pill{padding:6px 14px;border-radius:999px;background:rgba(255,255,255,.5);cursor:pointer}
    .chapter-dropdown{position:relative}
    .chapter-list{
      position:absolute;top:36px;left:50%;transform:translateX(-50%);
      background:var(--grad-menu);border-radius:12px;padding:8px;
      max-height:200px;overflow-y:auto;display:none;width:140px
    }
    .chapter-list div{padding:6px;text-align:center;cursor:pointer}
    #chapter{
  display: flex;
  flex-direction: column;
}
    #chapter h3{
        font-size: 20px;
        text-align: center;
        margin-top: 8px;
        margin-bottom: 4px;
    }
    .box::-webkit-scrollbar{
  width: 0;
}

    footer{text-align:center;padding:24px;font-size:13px;opacity:.7}
  </style>
</head>
<body>
<header>
  <div class="logo" onclick="goHome()">
    <div class="logo-circle">I</div>Iris's book
  </div>
  <div class="menu-btn" id="menuBtn" onclick="toggleMenu()"><span></span><span></span><span></span></div>
</header>
<div class="menu-panel" id="menuPanel"></div>

<main>
  <section id="home"></section>
  <section id="story" class="hidden"></section>
  <section id="chapter" class="hidden"></section>
</main>

<footer>‚ú¶ Iris's book ‚ú¶</footer>

<script>
//ph·∫ßn n·ªôi dung ch∆∞∆°ng
// 1Ô∏è‚É£ T·∫°o khung 99 ch∆∞∆°ng r·ªóng
const defaultChapters = Array.from({ length: 99 }, (_, i) => ({
  title: `Ch∆∞∆°ng ${i + 1}`,
  file: `texts/chuong${i + 1}.txt`
}));
//c√°c ch∆∞∆°ng truy·ªán
defaultChapters[15] = {
  title: "Ch∆∞∆°ng 16: C·ªë LƒÉng Ki·∫øm Kh∆∞u (9)",
  file: "chapter/chap16.txt"
};
defaultChapters[16] = {
  title: "Ch∆∞∆°ng 17: C·ªë LƒÉng Ki·∫øm Kh∆∞u (9)",
  file: "chapter/chap17.txt"
};
defaultChapters[29] = {
  title: "Ch∆∞∆°ng 30: trang tr·∫°i t·∫ßn kh√™",
  file: "chapter/chap30.txt"
};
defaultChapters[30] = {
  title: "Ch∆∞∆°ng 31: trang tr·∫°i t·∫ßn kh√™",
  file: "chapter/chap31.txt"
};    
/*ph·∫ßn th√¥ng tin truy·ªán ·ªü trang ch·ªß*/
const stories=[{
  title:"Ti·ªÉu S∆∞ ƒê·ªá H·∫Øc Li√™n Hoa Ng√†y N√†o C≈©ng Di·ªÖn V·ªõi Ta",
  cover: "images/truyen1.png",
  chapters: 99,
  desc: 'M·ªôt ng√†y n·ªç, V√¢n Ni·ªám - nh√¢n vi√™n c·ªßa C·ª•c Xuy√™n Th∆∞ - nh·∫≠n ƒë∆∞·ª£c nhi·ªám v·ª• ƒë·∫ßu ti√™n: xuy√™n v√†o ti·ªÉu thuy·∫øt tu ti√™n „ÄäTo√°i Kinh„Äã ƒë·ªÉ c·ª©u v·ªõt nam ch√≠nh T·∫° Kh√°nh L·ªÖ, ngƒÉn c·∫£n h·∫Øn h·∫Øc h√≥a, gi√∫p h·∫Øn tr·ªü th√†nh ki·∫øm ƒë·∫°o ƒë·ªá nh·∫•t, c·ª©u ƒë·ªô ch√∫ng sinh. K·∫ø ho·∫°ch r·∫•t ƒë∆°n gi·∫£n: g·ª≠i g·∫Øm y√™u th∆∞∆°ng, l√†m b·ª©c t∆∞·ªùng ch·∫Øn s√≥ng gi√≥, nu√¥i l·ªõn m·ªôt m·ªπ c∆∞·ªùng th·∫£m nh·ªè ƒë√°ng th∆∞∆°ng. M·ªçi vi·ªác di·ªÖn ra ho√†n h·∫£o‚Ä¶ cho ƒë·∫øn khi n√†ng ph√°t hi·ªán ra: s∆∞ ƒë·ªá ngoan hi·ªÅn h√≥a ra ch·ªâ l√† ng·ª•y trang. Khi V√¢n Ni·ªám ch·ª©ng ki·∫øn T·∫° Kh√°nh L·ªÖ tay nhu·ªëm m√°u, gi·ªçng n√≥i d·ªãu d√†ng th√¨ th·∫ßm: "S∆∞ t·ª∑, t·ª∑ ƒë·ªãnh ƒëi ƒë√¢u?", n√†ng ch·ªâ mu·ªën quay ƒë·∫ßu ch·∫°y tr·ªën. Nh∆∞ng s·ª£i x√≠ch b·∫°c n∆°i c·ªï ch√¢n nh·∫Øc n√†ng r·∫±ng ‚Äì t√¨nh y√™u c·ªßa h·∫Øn kh√¥ng c√≥ l·ªëi tho√°t. T·ª´ √°nh s√°ng ch√≠nh ƒë·∫°o ƒë·∫øn b√≥ng t·ªëi t√† m·ªã, t·ª´ c·ª©u r·ªói ƒë·∫øn b·ªã chi·∫øm h·ªØu, li·ªáu n√†ng c√≥ th·ªÉ ho√†n th√†nh nhi·ªám v·ª•, hay l√∫n s√¢u v√†o v√≤ng xo√°y y√™u h·∫≠n kh√≥ ph√¢n?',
  content: defaultChapters
}];

let curStory=0, curChap=0;

function show(page){document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));document.getElementById(page).classList.remove('hidden');}

function goHome(){show('home');history.pushState({},'', '#home');}

function openStory(i){curStory=i;show('story');history.pushState({},'', `#story?id=${i}`);
  story.innerHTML=`<div class=story-header><div class=story-img></div><h2>${stories[i].title}</h2></div>
  <div class=tabs><span class=active id=tDesc>VƒÉn √°n</span><span id=tChap>Ch∆∞∆°ng</span></div>
  <div class=box id=boxDesc>${stories[i].desc}</div>
  <div class="box hidden" id=boxChap>${stories[i].content.map((ch,c)=>`
  <div onclick="openChapter(${c})">${ch.title}</div>`).join('')}</div>`;
  tDesc.onclick=()=>{boxDesc.classList.remove('hidden');boxChap.classList.add('hidden');tDesc.classList.add('active');tChap.classList.remove('active');};
  tChap.onclick=()=>{boxChap.classList.remove('hidden');boxDesc.classList.add('hidden');tChap.classList.add('active');tDesc.classList.remove('active');};
}

function openChapter(c) {
  curChap = c;
  show('chapter');
  history.pushState({}, '', `#chapter?id=${curStory}&c=${c}`);

  const ch = stories[curStory].content[c];

  chapter.innerHTML = `
    <h3>${stories[curStory].title} ‚Äì ${ch.title}</h3>

    <div class="chapter-nav">
      <div class="pill" onclick="prevChap()">Tr∆∞·ªõc</div>

      <div class="chapter-dropdown">
        <div class="pill" onclick="toggleChapList()">Ch∆∞∆°ng ‚ñº</div>
        <div class="chapter-list" id="chapList">
          ${
            stories[curStory].content
              .map((item, i) => `<div onclick="openChapter(${i})">${item.title}</div>`)
              .join('')
          }
        </div>
      </div>

      <div class="pill" onclick="nextChap()">Sau</div>
    </div>

    <div class="box" id="chapterContent">ƒêang t·∫£i n·ªôi dung...</div>
  `;

  fetch(ch.file)
    .then(res => {
      if (!res.ok) throw new Error("Kh√¥ng t√¨m th·∫•y file");
      return res.text();
    })
    .then(text => {
      document.getElementById("chapterContent").textContent = text;
    })
    .catch(() => {
      document.getElementById("chapterContent").textContent =
        "(Ch∆∞∆°ng n√†y hi·ªán ch∆∞a c√≥ n·ªôi dung)";
    });
}



function prevChap(){if(curChap>0)openChapter(curChap-1)}
function nextChap(){if(curChap<stories[curStory].content.length-1)openChapter(curChap+1)}
function toggleChapList(){chapList.style.display=chapList.style.display==='block'?'none':'block'}

function toggleMenu(){menuBtn.classList.toggle('active');menuPanel.classList.toggle('active')}

function renderHome(){home.innerHTML='';stories.forEach((s,i)=>{
  home.innerHTML+=`<div class=story-card onclick=\"openStory(${i})\"><div class="story-thumb" style="
  background-image: url('${s.cover}');
  background-size: cover;
  background-position: center;"></div><div><h4>${s.title}</h4><p>üìñ ${s.chapters} ch∆∞∆°ng</p></div></div>`;
});}

window.onpopstate=()=>location.reload();
renderHome();
</script>
</body>
</html>